# 3.1 Манипуляции с DOM

## 3.2 Создание DOM узла

_Задание._
Когда страница загрузится, появится сообщение для путешественника, сообщающее как заказать поездку. Для начала, создадим узел span с телефонным номером 1-555-jquery-air и поместим его в переменную message.
```html
<div id="tours">
    <h1>Guided Tours</h1>
    <ul>
        <li class="usa tour">
            <h2>New York, New York</h2>
            <span class="details">$1,899 for 7 nights</span>
            <button class="book">Book Now</button>
        </li>
    </ul>
</div>
```

_Решение._
В переменную message поместим node узел span с телефонным номером:
```javascript
var message = $('<span>1-555-jquery-air</span>');
```

_Пояснение._
В иерархии DOM каждый тег html образует отдельный элемент-узел. Это значит, что мы можем отображать на странице не только элементы, созданные непосредственно в html, но и добавленные в js файл с помощью DOM узла.

## 3.3 Добавление к DOM I

_Задание._
Добавим номер телефона непосредственно перед "Book Now" button. 

_Решение._
Пользуясь методом [before()](http://api.jquery.com/before/), поместим переменную message перед button: 
```javascript
var message = $('<span>Call 1-555-jquery-air to book this tour</span>');
$('button').before(message);
```

_Пояснение._
Метод before(аргумент) относится к манипуляциям ввода во вне. Данный метод позволяет поместить содержимое, указанное в качестве аргумента, перед каждым соответствующим элементом. В качестве аргумента могут выступать: html строка, DOM элемент, массив элементов или jQuery объект, а также функция, получающая индекс позиции элемента в наборе в качестве аргумента и возвращающая любой из вышеперечисленных параметров, кроме массива.    
Помимо вида `$('элемент').before(другойЭлемент)`, можно расположить один элемент перед другим, используя вид `другойЭлемент.insertBefore($('элемент'));`. Обе записи равнозначны.   
Чтобы поместить новый элемент после указанного, используют метод .after() или .insertAfter()

## 3.4 Добавление к DOM II

_Задание._
Следующим шагом добавим span ниже элемента .usa. Для этого изменим предыдущий код.

_Решение._
Теперь поместим span в нижнюю часть .usa, используя метод [append()](http://api.jquery.com/append/):
```javascript
var message = $('<span>Call 1-555-jquery-air to book this tour</span>');
$('.usa').append(message);
```

_Пояснение._
Метод append(аргумент) работает подобно, методу before() (см. 3.3), но добавляет этемент в нижнюю часть указанного, а равнозначным ему считается appendTo($('элемент')).   
Чтобы поместить новый элемент в верхнюю часть указанного, используют метод .prepend() или .prependTo().

## 3.5 Удаление из DOM

_Задание._
Вероятно, следует удалить кнопку "Book Now" до тех пор, пока мы не сможем реализовать её. 

_Решение._
Чтобы удалить кнопку, воспользуемся методом [remove()](http://api.jquery.com/remove/):
```javascript
var message = $("<span>Call 1-555-jquery-air to book this tour</span>");
$(".usa").append(message);
$('button').remove();
```

_Пояснение._
Метод remove() удаляет соответствующие элементы и его содержимое из DOM. В качестве аргумента может содержать селекторное выражение в  виде строки, которое будет фильтровать набор соответствующих элементов для удаления.

# 3.6 Выполнение действия по взаимодействию

## 3.7 Взаимодействие по клику

_Задание._
Веб-страница была немнога изменена, но эти изменения не доступны пользователю. Следующим шагом изменим код, над которым мы работали ранее, добавив в него обработчик события click. А начнём с упаковки предыдущего кода в обработчик click для кнопок "Book Now", используя метод on().

_Решение._ 
Помещаем созданный ранее код в функцию, определяющую, что произойдёт после клика по кнопке:
```javascript
$('button').on('click', function () {
    var message = $("<span>Call 1-555-jquery-air to book this tour</span>");
    $(".usa").append(message);
    $("button").remove();
});
```

_Пояснение._
Метод on('событие', function(){}) обрабатывает события. В данном случае, с помощью функции обратного вызова обрабатывается событие 'click'. Это значит, что после клика по кнопке (в нашем случае), произойдут действия, указанные в теле функции.

## 3.8 Выполнение действия по клику

_Задание._
Теперь, когда у нас есть обработчик click, работающий для кнопок "Book Now", попробуем что-то немного другое. Изменим обработчик click, чтобы реагировать на переключения элементов списка ".tour"

_Решение._
Вместо button поместим весь список .tour:
```javascript
$(".tour").on("click", function(){
  var message = $("<span>Call 1-555-jquery-air to book this tour</span>");
  $(".usa").append(message);
  $("button").remove();
});
```

_Пояснение._
Теперь событие обрабатывается при клике на любом месте блика со списком .tour. Из этого можно сделать вывод, что обрабатываться могут не только кнопки, но и любые другие элементы страницы.

## 3.9 При загрузке страницы

_Задание._
Похоже, в нашем коде есть проблема - он не всегда выполняется, когда страница загружена. Обернём весь код в блок $(document).ready() так чтобы он не выполнялся, пока DOM не загружена.

_Решение._
Теперь код из предыдущего задания поместим в ткло функции обратного вызова так, чтобы он выполнялся только после полной загрузки DOM:
```javascript
$(document).ready(function () {
    $("button").on("click", function () {
        var message = $("<span>Call 1-555-jquery-air to book this tour</span>");
        $(".usa").append(message);
        $("button").remove();
    });
});
```

_Пояснение._
Непосредственно сама DOM представлена как document. По-умолчанию код начинает выполняться сразу же, что может привести к умнешению скорости загрузки страницы. Чтобы этого не происходило, пользуются методом ready(), который принимает в качестве аргумента то, что должно работать только после полной загрузки страницы.