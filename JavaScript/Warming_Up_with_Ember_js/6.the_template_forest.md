# 6.1 Компоненты

## 6.2 Создание повторно используемых компонентов

_Задание._
Мы отображаем одинаковую информацию о продуктах в нескольких местах. Разделим product details на повторно используемые компоненты.   
1) Создать шаблон component для продуктов и назвать его product-details. Помнить, что это компонент, поэтому ег название будет отличаться от предыдущих шаблонов.     
2) Заполнить новый шаблон начиная с контента, используемого ранее в products/deals. Пропустить охваченные элементы, но установить компонент для ожидания объекта product, который обладает необходимыми свойствами.    
3) Внутри шаблона products/index использовать новый компонент product-details, передав ему product, который ожидает компонент. Также установить класс и обёртку, для соответствия текущим настройкам.     
4) Также обновить шаблон index для использования нашего нового компонента. Нужно иметь в виду, что планируется сохранить тег и класс текущего элемента.     
5) Мы сможем отчистить немного больше места с помощью компонента. Одно из них - в шаблоне products/onsale. Опять таки, обновить его, используя наш компонент.       
6) На последок, обновить шаблон products/deals, используя компонент. Нужно также иметь в виду, что планируется сохранить тег и класс текущего элемента.      

_Решение._
На этот раз задание относится исключительно к HTML. Для начало создадим новый шаблон components/product-details, в который поместим часто повторяющиеся элементы для вывода продуктов без охватывающего их тега (li). А затем, в шаблонах index, products/index, products/onsale и products/deals заменим их на компоненты product-details, указав имя охватывающего тега и класса:   
```html
<!DOCTYPE html>
<html>
<head>
    ...
</head>
<body>
<script type='text/x-handlebars' data-template-name='application'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='index'>
    ...
    <div class='row'>
        {{#each onSale}}
        {{product-details product=this tagName='div' classNames='col-sm-4'}}
        {{/each}}
    </div>
    ...
</script>
<script type='text/x-handlebars' data-template-name='contacts/index'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='credits'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='products'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='product'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='products/index'>
    ...
    <ul class='list-unstyled'>
        {{#each}}
        {{product-details product=this tagName='li' classNames='row'}}
        {{/each}}
    </ul>
</script>
<script type='text/x-handlebars' data-template-name='contacts'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='contact'>
    ...
</script>
<script type='text/x-handlebars' data-template-name='products/onsale'>
    ...
    <ul class='list-unstyled'>
        {{#each}}
        {{product-details product=this tagName='li' classNames='row'}}
        {{/each}}
    </ul>
</script>
<script type='text/x-handlebars' data-template-name='products/deals'>
    ...
    <ul class='list-unstyled'>
        {{#each}}
        {{product-details product=this tagName='li' classNames='row'}}
        {{/each}}
    </ul>
</script>
<script type='text/x-handlebars' data-template-name='components/product-details'>
    <img {{bind-attr src='product.image'}} class='img-thumbnail col-sm-5' />
    <div class='col-sm-7'>
        <h2>{{product.title}}</h2>

        <p class='product-description'>{{product.description}}</p>

        <p>{{#link-to 'product' product class='btn btn-success'}}
            Buy for ${{product.price}}{{/link-to}}</p>
    </div>
</script>
</body>
</html>
```

_Пояснение._
Бывает так, что одни и теже части кода повторяются несколько раз. Чтобы эти повторения занимали меньше места, их заменяют на  шаблон components. В этом шаблоне помещают все требуемые элементы; его имя может начинаться с "components/", а далее содержать дефис, как в нашем упражнении product-details. Следует также отметить, что все свойства, употребляемые в components получают предшествующее им через точку имя объекта (как "product.title"). В шаблонах же, в которых этот компонент употребляется, применяют {{имя-компонента имяОбъекта=this}}, куда, при необходимости помещают tagName и classNames для элемента-обёртки.

## 6.3 Компонент Contact 

_Задание._
В предыдущем упражнении мы узнали как разбить разметку, чтобы сделать компоненты повторно используемыми. В этот раз используем наши знания для контактов.   
1) Создать шаблон компонента для контактов, названный contact-details.   
2) В этом компоненте атобразим avatar, name и about. Отчистим разметку для дальнейшего использования.    
3) Внутри шаблона product, под reviews, использовать contact-details, передав создателя продукта.    
4) Обернуть элемент для contact-details классом row.

_Решение._
Создадим шаблон components/contact-details и поместим в него изображение имя и описание контакта. Затем поместим этот компонент в шаблон product, указав класс row:   
```html
<script type='text/x-handlebars' data-template-name='product'>
    ...
    <h3>Crafter of the product</h3>
    {{contact-details contact=this classNames='row'}}
</script>
<script type='text/x-handlebars' data-template-name='components/contact-details'>
    <div class='col-sm-5'>
        <img {{bind-attr src='contact.avatar' alt='contact.name'}} class='img-thumbnail img-rounded'/>
    </div>
    <div class='col-sm-7'>
        <h2>{{contact.name}}</h2>

        <p>{{contact.about}}</p>
    </div>
</script>
```

_Пояснение._
По умолчанию tegName подразумевает div, поэтому его не обязательно указывать при создании блока.