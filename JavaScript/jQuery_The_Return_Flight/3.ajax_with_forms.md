# 3.1 Ajax с формами

## 3.2 Событие submit в форме

_Задание._
Здесь используется форма из [Try jQuery](https://github.com/Preigile/CodeschoolHints/blob/master/JavaScript/Try_jQuery/4.events.md#415-%D0%94%D1%80%D1%83%D0%B3%D0%BE%D0%B9-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA-%D1%81%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D0%B9). Когда количество ночей изменяется, отобразим обновлённые данные о стоимости поездки. Добавим способ представления формы. Добавим слушателя события submit на форме, которую будет обрабатывать функция. Эта функция должна принимать один параметр - событие submission формы. Вызовем preventDefault в этом событии, чтобы остановить перезагрузку браузера. Вызов ajax в этом обработчике событий мы напишем позже.
```javascript
$(document).ready(function () {
    $('#nights').on('keyup', function () {
        var nights = +$(this).val();
        var dailyPrice = +$(this).closest('.tour').data('daily-price');
        $('#total').text(nights * dailyPrice);
        $('#nights-count').text($(this).val());
    });
    $('#nights').on('focus', function () {
        $('#nights').val(7);
    });
});
```

_Решение._
Выберем элемент form и добавим к нему обработчик события submit. В коллбек этого обработчика передадим аргумент event, к которому добавим метод preventDefault():
```javascript
$(document).ready(function () {
    $('form').on('submit', function (event) {
        event.preventDefault();
    })
});
```

_Пояснение._
Событие submit реагирует на отправление данных из формы.  
Если вызван метод preventDefault(), то осуществляемое по умолчанию событие (к примеру, загрузка браузера) не будет срабатывать. Метод не содержит в себе аргументов.

## 3.3 $.ajax с POST

_Задание._
Всё готово, чтобы начать обработку события submission формы с использованием Ajax. Внутри обработчика нужно произвести несколько манипуляций. Сделать запрос к /book URL на сервер типа  POST. Также передать в контенты форму в качестве данных, используя serialize.

_Решение._
Добавим в коллбек метод ajax() с url /book и опциями type и data:
```
$(document).ready(function () {
    $('form').on('submit', function (event) {
        event.preventDefault();
        $.ajax('/book', {
            type: 'POST',
            data: $('form').serialize()
        })
    });
});
```

_Пояснение._
Метод serialize() кодирует набор элементов формы в виде строки для переачи. Не содержит аргуменов.

##  3.4 Коллбек success

_Задание._
Сервер был изменён и мы можем видеть, что данные из формы теперь передаются успешно. К сожалению, однако, они ещё не отображаются.  
Добавим колбек для success, который будет обрабатывать этот случай. Передадим элемент html .tour в качестве результата ajax запроса.

_Решение._
Теперь добавим коллбек, который возвращает ответ в виде html:
```
$(document).ready(function () {
    $('form').on('submit', function (event) {
        event.preventDefault();
        $.ajax('/book', {
            type: 'POST',
            data: $('form').serialize(),
            success: function (response) {
                $('.tour').html(response);
            }
        });
    });
});
```

_Пояснение._
Теперь мы можем получать и использовать введённые пользователем в форму данные.